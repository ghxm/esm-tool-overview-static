{%- comment -%}Generate consistent badge color based on value and base color{%- endcomment -%}
{%- assign base_color = include.base_color | default: "primary" -%}
{%- assign value = include.value | downcase | strip -%}

{%- comment -%}Improved hash using string analysis{%- endcomment -%}
{%- assign value_length = value | size -%}

{%- comment -%}Calculate hash based on character codes and positions{%- endcomment -%}
{%- assign hash = 0 -%}
{%- assign alphabet = "abcdefghijklmnopqrstuvwxyz0123456789 -" -%}

{%- comment -%}Process each character with position weight{%- endcomment -%}
{%- for i in (0..value_length) -%}
  {%- assign char = value | slice: i, 1 -%}
  {%- assign char_pos = alphabet | split: "" | index: char -%}
  {%- if char_pos -%}
    {%- assign position_weight = i | plus: 1 -%}
    {%- assign char_contribution = char_pos | times: position_weight | times: 17 -%}
    {%- assign hash = hash | plus: char_contribution -%}
  {%- endif -%}
{%- endfor -%}

{%- comment -%}Add length factor for better distribution{%- endcomment -%}
{%- assign hash = hash | plus: value_length | times: 23 -%}

{%- comment -%}Use larger color pool and better distribution{%- endcomment -%}
{%- assign color_index = hash | modulo: 12 -%}

{%- comment -%}Define diverse color variants with 12 options{%- endcomment -%}
{%- case base_color -%}
  {%- when 'primary' -%}
    {%- assign colors = 'primary,info,success,warning,danger,secondary,dark,primary,info,success,warning,danger' | split: ',' -%}
  {%- when 'success' -%}
    {%- assign colors = 'success,primary,info,warning,secondary,dark,success,primary,info,warning,secondary,dark' | split: ',' -%}
  {%- when 'info' -%}
    {%- assign colors = 'info,primary,success,secondary,warning,danger,info,primary,success,secondary,warning,danger' | split: ',' -%}
  {%- when 'warning' -%}
    {%- assign colors = 'warning,danger,secondary,primary,info,success,warning,danger,secondary,primary,info,success' | split: ',' -%}
  {%- when 'danger' -%}
    {%- assign colors = 'danger,warning,secondary,dark,primary,info,danger,warning,secondary,dark,primary,info' | split: ',' -%}
  {%- when 'secondary' -%}
    {%- assign colors = 'secondary,dark,primary,info,success,warning,secondary,dark,primary,info,success,warning' | split: ',' -%}
  {%- else -%}
    {%- assign colors = 'primary,info,success,warning,danger,secondary,dark,primary,info,success,warning,danger' | split: ',' -%}
{%- endcase -%}

{%- assign consistent_color = colors[color_index] -%}